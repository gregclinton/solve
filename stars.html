<div id="acl"></div>

<pre id="lst"></pre>

<pre>
Scorpius
p

15:56:53   −29.2   3.8   ρ
15:58:51   −26.1   2.9   π
16:00:20   −22.6   2.3   δ
16:05:26   −19.9   2.6   β1 
16:06:48   −20.7   3.9   ω1 
16:07:24   −20.9   4.3   ω2
16:11:59   −19.5   4.0   ν
16:17:02   -23.0   7.3   M80 globular cluster
16:20:38   −24.2   4.6   ο
16:21:11   −25.6   2.9   σ
16:23:35   -26.5   5.6   M4 globular cluster
16:29:24   −26.4   0.9   α Antares
16:35:52   −28.2   2.8   τ


</pre>

<img src="https://upload.wikimedia.org/wikipedia/commons/3/38/Scorpius_IAU.svg"/>

<script>
    // http://www.jgiesen.de/astro/astroJS/siderealClock/sidClock.js
//    navigator.permissions.query({name:'accelerometer'}).then(function(result) {
  //      document.getElementById('acl').innerHTML = result.state;
 // });







 if ('GravitySensor' in window) {
  document.getElementById('acl').innerHTML = 'Generic Sensor API';
 }
  /*
  let lastReadingTimestamp;
  let accelerometer = new LinearAccelerationSensor();
  accelerometer.addEventListener('reading', e => {
    if (lastReadingTimestamp) {
      intervalHandler(Math.round(accelerometer.timestamp - lastReadingTimestamp));
    }
    lastReadingTimestamp = accelerometer.timestamp
    accelerationHandler(accelerometer, 'moAccel');
  });
  accelerometer.start();
  
  if ('GravitySensor' in window) {
    let gravity = new GravitySensor();
    gravity.addEventListener('reading', e => accelerationHandler(gravity, 'moAccelGrav'));
    gravity.start();
  }
  
  let gyroscope = new Gyroscope();
  gyroscope.addEventListener('reading', e => rotationHandler({
    alpha: gyroscope.x,
    beta: gyroscope.y,
    gamma: gyroscope.z
  }));
  gyroscope.start();
  
} else if ('DeviceMotionEvent' in window) {
  document.getElementById('moApi').innerHTML = 'Device Motion API';
  
  var onDeviceMotion = function (eventData) {
    accelerationHandler(eventData.acceleration, 'moAccel');
    accelerationHandler(eventData.accelerationIncludingGravity, 'moAccelGrav');
    rotationHandler(eventData.rotationRate);
    intervalHandler(eventData.interval);
  }
  
  window.addEventListener('devicemotion', onDeviceMotion, false);
} else {
  document.getElementById('acl').innerHTML = 'No Accelerometer & Gyroscope API available';
}

function accelerationHandler(acceleration, targetId) {
  var info, xyz = "[X, Y, Z]";

  info = xyz.replace("X", acceleration.x && acceleration.x.toFixed(3));
  info = info.replace("Y", acceleration.y && acceleration.y.toFixed(3));
  info = info.replace("Z", acceleration.z && acceleration.z.toFixed(3));
  document.getElementById('acl').innerHTML = info;
}

function rotationHandler(rotation) {
  var info, xyz = "[X, Y, Z]";

  info = xyz.replace("X", rotation.alpha && rotation.alpha.toFixed(3));
  info = info.replace("Y", rotation.beta && rotation.beta.toFixed(3));
  info = info.replace("Z", rotation.gamma && rotation.gamma.toFixed(3));
  document.getElementById("acl").innerHTML = info;
}

function intervalHandler(interval) {
  document.getElementById("acl").innerHTML = interval;
}
*/











document.getElementById('acl').innerHTML = 'xxx';

let acl = new Accelerometer({frequency: 60});

acl.addEventListener('reading', () => {
    document.getElementById('acl').innerHTML = 'adfasd';
});

acl.addEventListener('devicemotion', () => {
    document.getElementById('acl').innerHTML = 'eqr';
});

acl.start();

accelerometer.onreading = (e) => {
    document.getElementById('acl').innerHTML = 'abc';
};

acl.onerror = (event) => {

    document.getElementById('acl').innerHTML = event.error.name;
  };

    DeviceMotionEvent.requestPermission().then(response => {
        document.getElementById('acl').innerHTML = response;
        if (response == 'granted') {
            document.getElementById('acl').innerHTML = "accelerometer permission granted";
            let acl = new Accelerometer({frequency: 60});

            acl.addEventListener('reading', () => {
                document.getElementById('acl').innerHTML = result.state;
            });
            acl.start();
        }
    });


    function setLst() {
        let longitude = -117.6401;
        let dt = new Date();
        let y = dt.getUTCFullYear();
        let m = dt.getUTCMonth() + 1;
        let d = dt.getUTCDate();

        if (m <= 2) {
            m += 12;
            y--;
        }

        let floor = Math.floor;
        let u = dt.getUTCHours() + dt.getUTCMinutes() / 60 + dt.getUTCSeconds() / 3600;
        let jd = floor(365.25 * (y + 4716)) + floor(30.6001 * (m + 1)) + d - 13 -1524.5 + u / 24.0 - 2400000.5;		
        let jd0 = floor(jd);
        let eph  = (jd0 - 51544.5) / 36525.0;			
        let gst =  6.697374558 + 1.0027379093 * (jd - jd0) * 24.0 + (8640184.812866 + (0.093104 - 0.0000062 * eph) * eph) * eph / 3600.0;
        let lst = gst + longitude / 15;
        let t = 24.0 * ((lst / 24.0) % 1);
        let h = floor(t);
        let min = floor(60.0 * (t % 1));
        let s = Math.round(60.0 * (60.0 * (t % 1) - min));
        let pad = d => (d > 9 ? '' : '0') + d;

        document.getElementById('lst').innerHTML = pad(h) + ':' + pad(min) + ':' + pad(s);
    }

    setLst();
    setInterval(setLst, 1000);
</script>